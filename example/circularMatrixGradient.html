<!DOCTYPE html>
<html>
<head>
<title>Matrix circle</title>
<script src="/ColorUtil.js"></script>
</head>
<body>
<canvas id="canvas"></canvas>

<script>

let width = 300;
let height = 300;

// var scale = 0.5;
// var center = 0.5 / scale;
// var size = width * scale;

let canvas = document.getElementById('canvas');
let ctx = canvas.getContext('2d');
let imageData  = ctx.createImageData(width, height);
let buffer = imageData.data.buffer;
let uint32View = new Uint32Array(buffer);
let uint8CView = new Uint8ClampedArray(buffer);

canvas.width = width;
canvas.height = height;

let gradientFunction = ColorUtil.rgb.createGradient({
    colors: [
        [{r:255, g: 255, b: 255, a: 255}],
        ColorUtil.rgb.hueColors()
    ],
    type: 'circular',
    rotation: 0.25,
    width: height,
    height: height,
    scale: 0.5,
    centralize: true
});

for(let x = 0; x < width; x++) {

    for(let y = 0; y < height; y++) {

        // let rgb = gradientFunction(x/size, y/size);
        let rgb = gradientFunction(x, y);

        uint32View[y * width + x] = ColorUtil.rgb.toUint32(rgb);
    }
}

imageData.data.set(uint8CView);

ctx.putImageData(imageData, 0, 0);

</script>

</body>

</html>