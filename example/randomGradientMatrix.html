<!DOCTYPE html>
<html>
<head>
<title>Random gradient matrix</title>
<script src="/ColorUtil.js"></script>
</head>
<body>
<canvas id="canvas"></canvas>
<br />
Refresh the page to update colors
<script>

let width = 300;
let height = 300;
let colors = getRandomColors();
let canvas = document.getElementById('canvas');
let ctx = canvas.getContext('2d');
let imageData  = ctx.createImageData(width, height);
let buffer = imageData.data.buffer;
let uint32View = new Uint32Array(buffer);
let uint8CView = new Uint8ClampedArray(buffer);

canvas.width = width;
canvas.height = height;

for(let x = 0; x < width; x++) {

    for(let y = 0; y < height; y++) {

        uint32View[y * width + x] =
            ColorUtil.getGradientMatrixColor(
                colors,
                x/width,
                y/height,
                ColorUtil.int.toObj,
                ColorUtil.obj.toUint32);
    }
}

imageData.data.set(uint8CView);

ctx.putImageData(imageData, 0, 0);

function getRandomColors() {
    let colors = [];
    let rows = 1 + Math.random() * 2;

    for (let y = 0; y < rows; y++) {

        let cols = Math.random() * 10;
        let gradient = [];

        colors.push(gradient);

        for (let x = 0; x < cols; x++) {
            gradient.push((Math.random() * 0xFFFFFF)|0);
        }
    }

    return colors;
}

</script>

</body>

</html>